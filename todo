1. 127.0.0.1 change to dynamic one

2. Add threads correctly

3. Add program options